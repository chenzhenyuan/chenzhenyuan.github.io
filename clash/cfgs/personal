---
# ==============================================================================
#
# V2rayN/NG:  https://d.cloudso.club/link/C4OZwUTBHQCvvu2Y?sub=3&extend=1
# Clash:  https://d.cloudso.club/link/C4OZwUTBHQCvvu2Y?clash=1
#
# ------------------------------------------------------------------------------
# ğŸ‡²ğŸ‡´ ğŸ‡¨ğŸ‡³

redir-port: 51366
# æ··åˆä»£ç†ç«¯å£
mixed-port: 51300
# Socks5 ä»£ç†ç«¯å£
socks-port: 51301
# HTTP ä»£ç†ç«¯å£
port: 51302
# RESTful API for clash
external-controller: "127.0.0.1:51377"
# è§„åˆ™æ¨¡å¼: rule (è§„åˆ™) / global (å…¨å±€ä»£ç†) / direct (å…¨å±€ç›´è¿)
mode: rule
# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«: silent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: error
# RESTful API secret
secret: "p0o9i8u7"
# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: true

# # ==> æ­¤åŠŸèƒ½ä»…åœ¨ allow-lan è®¾ç½®ä¸º true æ—¶ç”Ÿæ•ˆï¼Œæ”¯æŒä¸‰ç§å‚æ•°ï¼š
# # ==> "*"                           ç»‘å®šæ‰€æœ‰çš„ IP åœ°å€
# # ==> 192.168.122.11                ç»‘å®šä¸€ä¸ª IPv4 åœ°å€
# # ==> "[aaaa::a8aa:ff:fe09:57d8]"   ç»‘å®šä¸€ä¸ª IPv6 åœ°å€
# bind-address: "*"
# bind-address: "172.28.12.169"

# æœ¬åœ° SOCKS5 / HTTP(S) æœåŠ¡è®¤è¯
# authentication:
#   - "myUsername:myPassword"

# ------------------------------------------------------------------------------
# æ‚¨å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æºï¼ˆå¦‚ clash-dashboardï¼‰æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œclash å°†ä¼šæœåŠ¡äº `${API}/ui`
# å‚æ•°åº”å¡«å†™é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚
# external-ui: folder

# # å®éªŒæ€§åŠŸèƒ½ hosts, æ”¯æŒé€šé…ç¬¦ (ä¾‹å¦‚ *.clash.dev ç”šè‡³ *.foo.*.example.com)
# # é™æ€çš„åŸŸå æ¯” é€šé…åŸŸå å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ (foo.example.com ä¼˜å…ˆäº *.example.com)
# # æ³¨æ„: hosts åœ¨ fake-ip æ¨¡å¼ä¸‹ä¸ç”Ÿæ•ˆ
hosts:
  "*.chenzhenyuan.cn": 127.0.0.1
  "*.chenzhenyuan.io": 127.0.0.1
  "chenzhenyuan.cn": 127.0.0.1
  "chenzhenyuan.io": 127.0.0.1

dns:
  # æ˜¯å¦å¯ç”¨dns
  enable: true
  ipv6: true
  use-hosts: true
  listen: 127.0.0.1:53
  # æ¨¡å¼: redir-host æˆ– fake-ip
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  # #åˆ—è¡¨ä¸­çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸ºfake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„IPåœ°å€
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "*.chenzhenyuan.com"
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.xboxlive.com"
    - "*.ip.sb"
    - "*.jsdelivr.net"
    - "ip.sb"
    - "localhost.ptlogin2.qq.com"
    - "msftconnecttest.com"
    - "xbox.*.microsoft.com"
    - "jsdelivr.net"
    - "raw.gitmirror.com"
    - "chenzhenyuan.com"

  nameserver-policy:
    # ç§äººåŸŸå
    "*.chenzhenyuan.com": 119.29.29.29
  # default-nameserver:
  #   - 119.29.29.29
  #   - 223.5.5.5
  nameserver:
    - 119.29.29.29
    - 223.5.5.5
    # é˜¿é‡Œäº‘ DoH DNS
    - "https://dns.alidns.com/dns-query"
  fallback:
    # Cloudflare DNS
    - 1.1.1.1
    - tls://1.0.0.1:853
    - https://doh.pub/dns-query
    - https://dns.cloudflare.com/dns-query

    # Google
    - 8.8.8.8
    - tls://8.8.4.4:853
    - tls://dns.google:853
    - https://dns.google/dns-query

    - 45.11.45.11
    - https://45.11.45.11/dns-query
    - 185.222.222.222
    - https://185.222.222.222/dns-query
    - https://doh.sb/dns-query
    # - https://doh.dns.sb/dns-query
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4
      - 127.0.0.1/32
      - 0.0.0.0/32

proxy-providers:
  é¦™æ¸¯æœºæˆ¿:
    type: http
    path: ./proxies/HongKong.yaml
    url: https://chenzhenyuan.com/clash/proxies/HongKong.yaml
    filter: é¦™æ¸¯
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  å°æ¹¾æœºæˆ¿:
    type: http
    path: ./proxies/Taiwan.yaml
    url: https://chenzhenyuan.com/clash/proxies/Taiwan.yaml
    filter: å°æ¹¾
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æ–°åŠ å¡æœºæˆ¿:
    type: http
    path: ./proxies/Singapore.yaml
    url: https://chenzhenyuan.com/clash/proxies/Singapore.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æ—¥æœ¬æœºæˆ¿:
    type: http
    path: ./proxies/Japan.yaml
    url: https://chenzhenyuan.com/clash/proxies/Japan.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  éŸ©å›½æœºæˆ¿:
    type: http
    path: ./proxies/Korea.yaml
    url: https://chenzhenyuan.com/clash/proxies/Korea.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  ç¾å›½æœºæˆ¿:
    type: http
    path: ./proxies/America.yaml
    url: https://chenzhenyuan.com/clash/proxies/America.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  å…¶ä»–æœºæˆ¿:
    type: http
    path: ./proxies/GlobalArea.yaml
    url: https://chenzhenyuan.com/clash/proxies/GlobalArea.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

# <classical | domain>
rule-providers:
  AdBlock:
    type: http
    behavior: classical
    # url: https://raw.iqiq.io/Semporia/Clash/master/Rule/AdBlock.yaml
    url: https://raw.iqiq.io/JAYNE0110/clashx/release/providers/ruleset/apple.yaml
    path: ./ruleset/JAYNE0110/clashx/AdBlock.yaml
    interval: 3600
  Apple:
    type: http
    behavior: classical
    url: https://raw.iqiq.io/JAYNE0110/clashx/release/providers/ruleset/apple.yaml
    path: ./ruleset/JAYNE0110/clashx/apple.yaml
    interval: 3600
  Applications:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/applications.yaml
    path: ./ruleset/chenzhenyuan/applications.yaml
    interval: 3600
  ChinaDomain:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ChinaDomain.yaml
    path: ./ruleset/ACL4SSR/ACL4SSR/ChinaDomain.yaml
    interval: 3600
  GitHub:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/github.yaml
    path: ./ruleset/chenzhenyuan/github.yaml
    interval: 3600
  Google:
    type: http
    behavior: classical
    url: https://raw.iqiq.io/Semporia/Clash/master/Rule/Google.yaml
    path: ./ruleset/chenzhenyuan/google.yaml
    interval: 3600
  LocalAreaNetwork:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/lan.yaml
    path: ./ruleset/chenzhenyuan/lan.yaml
    interval: 86400
  GFW:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt
    path: ./ruleset/Loyalsoldier/clash-rules/ProxyGFWlist.yaml
    interval: 3600
  OverseasIP:
    type: http
    behavior: classical
    url: https://raw.iqiq.io/JAYNE0110/clashx/release/providers/ruleset/overseas-ip
    path: ./ruleset/JAYNE0110/clashx/overseas-ip.yaml
    format: yaml
    interval: 3600
  Telegram:
    type: http
    behavior: classical
    url: https://raw.iqiq.io/JAYNE0110/clashx/release/providers/ruleset/telegram
    path: ./ruleset/JAYNE0110/clashx/telegram.yaml
    format: yaml
    interval: 3600
  Tencent:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/tencent.yaml
    path: ./ruleset/chenzhenyuan/tencent.yaml
    interval: 3600
  Twitter:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/twitter.yaml
    path: ./ruleset/chenzhenyuan/twitter.yaml
    interval: 3600
  YouTube:
    type: http
    behavior: classical
    url: https://raw.iqiq.io/Semporia/Clash/master/Rule/YouTube.yaml
    path: ./ruleset/Semporia/Clash/YouTube.yaml
    interval: 3600

proxy-groups:
  - name: é»˜è®¤çº¿è·¯
    # <url-test | select | load-balance | random | fallback>
    type: select
    proxies:
      - å…¨çƒè´Ÿè½½
      - æ‰‹åŠ¨é€‰æ‹©
      - é¦™æ¸¯é›†ç¾¤
      - å°æ¹¾é›†ç¾¤
      - æ–°åŠ å¡é›†ç¾¤
      - æ—¥æœ¬é›†ç¾¤
      - éŸ©å›½é›†ç¾¤
      - ç¾å›½é›†ç¾¤
      - å…¶ä»–é›†ç¾¤

  - name: å…¨çƒè´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 60
    # strategy: <consistent-hashing | round-robin>
    strategy: consistent-hashing
    proxies:
      - é¦™æ¸¯é›†ç¾¤
      - å°æ¹¾é›†ç¾¤
      - æ–°åŠ å¡é›†ç¾¤
      - æ—¥æœ¬é›†ç¾¤
      - éŸ©å›½é›†ç¾¤
      - ç¾å›½é›†ç¾¤
      - å…¶ä»–é›†ç¾¤

  - name: æ‰‹åŠ¨é€‰æ‹©
    type: select
    use:
      - é¦™æ¸¯æœºæˆ¿
      - å°æ¹¾æœºæˆ¿
      - æ–°åŠ å¡æœºæˆ¿
      - ç¾å›½æœºæˆ¿
      - æ—¥æœ¬æœºæˆ¿
      - éŸ©å›½æœºæˆ¿
      - å…¶ä»–æœºæˆ¿

  # ============================================================================
  - name: é¦™æ¸¯é›†ç¾¤
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    strategy: consistent-hashing
    use:
      - é¦™æ¸¯æœºæˆ¿
  - name: å°æ¹¾é›†ç¾¤
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    strategy: consistent-hashing
    use:
      - å°æ¹¾æœºæˆ¿
  - name: æ–°åŠ å¡é›†ç¾¤
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    strategy: consistent-hashing
    use:
      - æ–°åŠ å¡æœºæˆ¿
  - name: æ—¥æœ¬é›†ç¾¤
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    strategy: consistent-hashing
    use:
      - æ—¥æœ¬æœºæˆ¿
  - name: éŸ©å›½é›†ç¾¤
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    strategy: consistent-hashing
    use:
      - éŸ©å›½æœºæˆ¿
  - name: ç¾å›½é›†ç¾¤
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    strategy: consistent-hashing
    use:
      - ç¾å›½æœºæˆ¿
  - name: å…¶ä»–é›†ç¾¤
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    strategy: consistent-hashing
    use:
      - å…¶ä»–æœºæˆ¿

rules:
  # ============================================================================
  # ç§äººå®šåˆ¶
  # ----------------------------------------------------------------------------
  - DOMAIN-SUFFIX,chenzhenyuan.com,DIRECT,no-resolve
  - DOMAIN,raw.gitmirror.com,DIRECT
  - DOMAIN,raw.iqiq.io,DIRECT
  - DOMAIN,cdn.jsdelivr.net,DIRECT

  - DOMAIN-SUFFIX,sketch.cloud,DIRECT
  - DOMAIN,flow.logitech.io,DIRECT,no-resolve
  # - DOMAIN-KEYWORD,logitech,DIRECT,no-resolve

  - DOMAIN-SUFFIX,mac-torrent-download.net,é»˜è®¤çº¿è·¯
  # ============================================================================
  # IPæµ‹è¯• ç›¸å…³çš„è§„åˆ™
  # ----------------------------------------------------------------------------
  - DOMAIN,ip.900cha.com,DIRECT,no-resolve
  - DOMAIN,ip111.cn,DIRECT,no-resolve
  - DOMAIN-SUFFIX,ip.sb,DIRECT,no-resolve

  # ============================================================================
  # å¸¸è§å¹¿å‘ŠåŸŸåå±è”½
  # ----------------------------------------------------------------------------
  - DOMAIN,injections.adguard.org,REJECT
  - DOMAIN,local.adguard.org,REJECT
  - DOMAIN-SUFFIX,appsflyer.com,REJECT
  - DOMAIN-SUFFIX,doubleclick.net,REJECT
  - DOMAIN-SUFFIX,mmstat.com,REJECT
  - DOMAIN-SUFFIX,vungle.com,REJECT
  - DOMAIN-KEYWORD,admarvel,REJECT
  - DOMAIN-KEYWORD,admaster,REJECT
  - DOMAIN-KEYWORD,adsage,REJECT
  - DOMAIN-KEYWORD,adsmogo,REJECT
  - DOMAIN-KEYWORD,adsrvmedia,REJECT
  - DOMAIN-KEYWORD,adwords,REJECT
  - DOMAIN-KEYWORD,adservice,REJECT
  - DOMAIN-KEYWORD,domob,REJECT
  - DOMAIN-KEYWORD,duomeng,REJECT
  - DOMAIN-KEYWORD,dwtrack,REJECT
  - DOMAIN-KEYWORD,guanggao,REJECT
  - DOMAIN-KEYWORD,lianmeng,REJECT
  - DOMAIN-KEYWORD,mopub,REJECT
  - DOMAIN-KEYWORD,omgmta,REJECT
  - DOMAIN-KEYWORD,openx,REJECT
  - DOMAIN-KEYWORD,partnerad,REJECT
  - DOMAIN-KEYWORD,pingfore,REJECT
  - DOMAIN-KEYWORD,supersonicads,REJECT
  - DOMAIN-KEYWORD,uedas,REJECT
  - DOMAIN-KEYWORD,umeng,REJECT
  - DOMAIN-KEYWORD,usage,REJECT
  - DOMAIN-KEYWORD,wlmonitor,REJECT
  - DOMAIN-KEYWORD,zjtoolbar,REJECT
  - RULE-SET,AdBlock,REJECT

  # ============================================================================
  # è§„åˆ™é›†
  # ----------------------------------------------------------------------------
  - RULE-SET,LocalAreaNetwork,DIRECT

  - DOMAIN,api.github.com,DIRECT,no-resolve
  - RULE-SET,GitHub,é¦™æ¸¯é›†ç¾¤

  - RULE-SET,Google,ç¾å›½é›†ç¾¤
  - RULE-SET,YouTube,ç¾å›½é›†ç¾¤
  - RULE-SET,Telegram,é»˜è®¤çº¿è·¯
  - RULE-SET,OverseasIP,é»˜è®¤çº¿è·¯,no-resolve

  - RULE-SET,Apple,DIRECT
  - RULE-SET,Tencent,DIRECT

  - PROCESS-NAME,aCity,é»˜è®¤çº¿è·¯,no-resolve
  # ============================================================================
  # Twitter
  # ----------------------------------------------------------------------------
  - RULE-SET,Twitter,é¦™æ¸¯é›†ç¾¤
  - PROCESS-NAME,Twitter,é¦™æ¸¯é›†ç¾¤

  # ============================================================================
  # ç›´è¿è§„åˆ™
  # ----------------------------------------------------------------------------
  - DOMAIN,api.faviconkit.com,DIRECT,no-resolve
  - DOMAIN,s.deepl.com,DIRECT,no-resolve
  - DOMAIN-SUFFIX,appcenter.ms,DIRECT,no-resolve
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN-KEYWORD,-cn,DIRECT
  - RULE-SET,ChinaDomain,DIRECT
  - RULE-SET,Applications,DIRECT

  # ============================================================================
  # ç™½åå•æ¨¡å¼
  # ----------------------------------------------------------------------------
  - GEOIP,CN,DIRECT
  - MATCH,é»˜è®¤çº¿è·¯
