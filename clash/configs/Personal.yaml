---
# ==============================================================================
#
# V2rayN/NG:  https://d.cloudso.club/link/C4OZwUTBHQCvvu2Y?sub=3&extend=1
# Clash:  https://d.cloudso.club/link/C4OZwUTBHQCvvu2Y?clash=1
#
# ------------------------------------------------------------------------------
# ğŸ‡²ğŸ‡´ ğŸ‡¨ğŸ‡³

mixed-port: 51300
socks-port: 51301
redir-port: 51366
port: 51302

# clash çš„ RESTful APIc
external-controller: "127.0.0.1:51399"

# è§„åˆ™æ¨¡å¼ï¼šRuleï¼ˆè§„åˆ™ï¼‰ / Globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ Directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: rule

# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«: silent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: error

# RESTful API secret
secret: "p0o9i8u7"

# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: false
# æ­¤åŠŸèƒ½ä»…åœ¨ allow-lan è®¾ç½®ä¸º true æ—¶ç”Ÿæ•ˆï¼Œæ”¯æŒä¸‰ç§å‚æ•°ï¼š
# "*"                           ç»‘å®šæ‰€æœ‰çš„ IP åœ°å€
# 192.168.122.11                ç»‘å®šä¸€ä¸ª IPv4 åœ°å€
# "[aaaa::a8aa:ff:fe09:57d8]"   ç»‘å®šä¸€ä¸ª IPv6 åœ°å€
# bind-address: "*"
# bind-address: "172.28.12.169"

# æœ¬åœ° SOCKS5 / HTTP(S) æœåŠ¡è®¤è¯
# authentication:
#   - "myUsername:myPassword"

# ------------------------------------------------------------------------------
# æ‚¨å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æºï¼ˆå¦‚ clash-dashboardï¼‰æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œclash å°†ä¼šæœåŠ¡äº `${API}/ui`
# å‚æ•°åº”å¡«å†™é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚
# external-ui: folder

# # å®éªŒæ€§åŠŸèƒ½ hosts, æ”¯æŒé€šé…ç¬¦ (ä¾‹å¦‚ *.clash.dev ç”šè‡³ *.foo.*.example.com)
# # é™æ€çš„åŸŸå æ¯” é€šé…åŸŸå å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ (foo.example.com ä¼˜å…ˆäº *.example.com)
# # æ³¨æ„: hosts åœ¨ fake-ip æ¨¡å¼ä¸‹ä¸ç”Ÿæ•ˆ
hosts:
  "*.chenzhenyuan.cn": 127.0.0.1
  "chenzhenyuan.cn": 127.0.0.1
  "*.chenzhenyuan.io": 127.0.0.1
  "chenzhenyuan.io": 127.0.0.1

dns:
  # æ˜¯å¦å¯ç”¨dns
  enable: true
  ipv6: true
  use-hosts: true
  listen: 127.0.0.1:53
  # æ¨¡å¼: redir-hostæˆ–fake-ip
  enhanced-mode: redir-host
  fake-ip-range: 198.18.0.1/16
  # #åˆ—è¡¨ä¸­çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸ºfake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„IPåœ°å€
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "chenzhenyuan.com"
    - "*.chenzhenyuan.com"
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.xboxlive.com"
    - "*.ip.sb"
    - "ip.sb"
    - "localhost.ptlogin2.qq.com"
    - "msftconnecttest.com"
    - "xbox.*.microsoft.com"
    - "jsdelivr.net"
    - "raw.gitmirror.com"
    - "*.jsdelivr.net"

  default-nameserver:
    # DNSPod
    - 119.29.29.29
    - 119.28.28.28
    # é˜¿é‡Œäº‘DNS
    - 223.5.5.5
    # 114DNS
    - 114.114.114.114

  nameserver:
    - https://doh.pub/dns-query
    # é˜¿é‡Œäº‘ DoH DNS
    - https://dns.alidns.com/dns-query
    # DNSPod
    - 119.29.29.29
    # é˜¿é‡Œäº‘DNS
    - 223.5.5.5
    # ONE DNSæ‹¦æˆªç‰ˆ æ¶æ„ç½‘ç«™æ‹¦æˆªã€å¹¿å‘Šè¿‡æ»¤
    - 117.50.11.11
    # ONE DNSçº¯å‡€ç‰ˆ ç›´æ¥è¿”å›å…¶çœŸå®çš„å“åº”ç»“æœ
    - 117.50.10.10
    # 114DNS
    - 114.114.114.114

  nameserver-policy:
    # ç§äººåŸŸå
    "chenzhenyuan.com": 119.29.29.29
    "*.chenzhenyuan.com": 119.29.29.29
    "jsdelivr.net": 119.29.29.29
    "*.jsdelivr.net": 119.29.29.29

  fallback:
    - https://doh.dns.sb/dns-query
    # Google
    - tls://8.8.4.4:853
    - tls://dns.google:853
    - https://dns.google/dns-query
    # Cloudflare DNS
    - tls://1.0.0.1:853
    - https://dns.cloudflare.com/dns-query
    - https://cloudflare-dns.com/dns-query
    # - 1.1.1.1
    - tls://dns.rubyfish.cn:853
    # - https://dns.rubyfish.cn/dns-query

  fallback-filter:
    # é»˜è®¤
    geoip: true
    # domain:
    # åœ¨è¿™ä¸ªç½‘æ®µå†…çš„ IP åœ°å€ä¼šè¢«è€ƒè™‘ä¸ºè¢«æ±¡æŸ“çš„ IP
    ipcidr:
      # - 0.0.0.0/32
      - 240.0.0.0/4

proxy-providers:
  é¦™æ¸¯æœºæˆ¿:
    type: http
    path: ./proxies/HongKong.yaml
    url: https://chenzhenyuan.com/clash/proxies/HongKong.yaml
    filter: é¦™æ¸¯
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  å°æ¹¾æœºæˆ¿:
    type: http
    path: ./proxies/Taiwan.yaml
    url: https://chenzhenyuan.com/clash/proxies/Taiwan.yaml
    filter: å°æ¹¾
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æ–°åŠ å¡æœºæˆ¿:
    type: http
    path: ./proxies/Singapore.yaml
    url: https://chenzhenyuan.com/clash/proxies/Singapore.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  æ—¥æœ¬æœºæˆ¿:
    type: http
    path: ./proxies/Japan.yaml
    url: https://chenzhenyuan.com/clash/proxies/Japan.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  éŸ©å›½æœºæˆ¿:
    type: http
    path: ./proxies/Korea.yaml
    url: https://chenzhenyuan.com/clash/proxies/Korea.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  ç¾å›½æœºæˆ¿:
    type: http
    path: ./proxies/America.yaml
    url: https://chenzhenyuan.com/clash/proxies/America.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  å…¶ä»–æœºæˆ¿:
    type: http
    path: ./proxies/GlobalArea.yaml
    url: https://chenzhenyuan.com/clash/proxies/GlobalArea.yaml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

rule-providers:
  # è‹¹æœæœåŠ¡
  Apple:
    type: http
    behavior: domain
    url: https://chenzhenyuan.com/clash/rules/apple.yaml
    path: ./ruleset/chenzhenyuan/apple.yaml
    interval: 3600
  # å¸¸ç”¨è¿›ç¨‹å
  Applications:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/applications.yaml
    path: ./ruleset/chenzhenyuan/applications.yaml
    interval: 3600
  # å¹¿å‘Šå•†
  BanAD:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/BanAD.yaml
    path: ./ruleset/ACL4SSR/ACL4SSR/BanAD.yaml
    interval: 3600
  BanEasyList:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/BanEasyList.yaml
    path: ./ruleset/ACL4SSR/ACL4SSR/BanEasyList.yaml
    interval: 3600
  ChinaDomain:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Providers/ChinaDomain.yaml
    path: ./ruleset/ACL4SSR/ACL4SSR/ChinaDomain.yaml
    interval: 3600
  # GitHub
  GitHub:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/github.yaml
    path: ./ruleset/chenzhenyuan/github.yaml
    interval: 3600
  Google:
    type: http
    behavior: domain
    url: https://chenzhenyuan.com/clash/rules/google.yaml
    path: ./ruleset/chenzhenyuan/google.yaml
    interval: 3600
  # å±€åŸŸç½‘
  LocalAreaNetwork:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/lan.yaml
    path: ./ruleset/chenzhenyuan/lan.yaml
    interval: 86400
  # # GFWlist
  GFW:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt
    path: ./ruleset/Loyalsoldier/clash-rules/ProxyGFWlist.yaml
    interval: 3600
  # Telegram
  Telegram:
    type: http
    behavior: domain
    url: https://chenzhenyuan.com/clash/rules/telegram.yaml
    path: ./ruleset/chenzhenyuan/telegram.yaml
    interval: 3600
  # Twitter
  Twitter:
    type: http
    behavior: classical
    url: https://chenzhenyuan.com/clash/rules/twitter.yaml
    path: ./ruleset/chenzhenyuan/twitter.yaml
    interval: 3600

proxy-groups:
  - name: é»˜è®¤çº¿è·¯
    # <url-test | select | load-balance | random | fallback>
    type: select
    proxies:
      - å…¨çƒè´Ÿè½½
      - é›†ç¾¤çº¿è·¯
      - é¦™æ¸¯è´Ÿè½½
      - å°æ¹¾è´Ÿè½½
      - æ–°åŠ å¡è´Ÿè½½
      - ç¾å›½è´Ÿè½½
      - æ—¥æœ¬è´Ÿè½½
      - éŸ©å›½è´Ÿè½½
      - å…¶ä»–è´Ÿè½½

  - name: å…¨çƒè´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 180
    lazy: false
    proxies:
      - é¦™æ¸¯è´Ÿè½½
      - å°æ¹¾è´Ÿè½½
      - æ–°åŠ å¡è´Ÿè½½
      - ç¾å›½è´Ÿè½½
      - æ—¥æœ¬è´Ÿè½½
      - éŸ©å›½è´Ÿè½½
      - å…¶ä»–è´Ÿè½½
  - name: é›†ç¾¤çº¿è·¯
    type: select
    proxies:
      - é¦™æ¸¯é›†ç¾¤
      - å°æ¹¾é›†ç¾¤
      - æ–°åŠ å¡é›†ç¾¤
      - æ—¥æœ¬é›†ç¾¤
      - éŸ©å›½é›†ç¾¤
      - ç¾å›½é›†ç¾¤
      - å…¶ä»–é›†ç¾¤

  # ============================================================================
  - name: é¦™æ¸¯é›†ç¾¤
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - é¦™æ¸¯æœºæˆ¿
  - name: å°æ¹¾é›†ç¾¤
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - å°æ¹¾æœºæˆ¿
  - name: æ–°åŠ å¡é›†ç¾¤
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - æ–°åŠ å¡æœºæˆ¿
  - name: æ—¥æœ¬é›†ç¾¤
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - æ—¥æœ¬æœºæˆ¿
  - name: éŸ©å›½é›†ç¾¤
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - éŸ©å›½æœºæˆ¿
  - name: ç¾å›½é›†ç¾¤
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - ç¾å›½æœºæˆ¿
  - name: å…¶ä»–é›†ç¾¤
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - å…¶ä»–æœºæˆ¿

  # ============================================================================
  - name: é¦™æ¸¯è´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - é¦™æ¸¯æœºæˆ¿
  - name: å°æ¹¾è´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 10
    lazy: false
    use:
      - å°æ¹¾æœºæˆ¿
  - name: æ–°åŠ å¡è´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - æ–°åŠ å¡æœºæˆ¿
  - name: ç¾å›½è´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - ç¾å›½æœºæˆ¿
  - name: æ—¥æœ¬è´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - æ—¥æœ¬æœºæˆ¿
  - name: éŸ©å›½è´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - éŸ©å›½æœºæˆ¿
  - name: å…¶ä»–è´Ÿè½½
    type: load-balance
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    lazy: false
    use:
      - å…¶ä»–æœºæˆ¿

rules:
  # ============================================================================
  # ç§äººåŸŸå ç›¸å…³çš„è§„åˆ™
  # ----------------------------------------------------------------------------
  - DOMAIN-SUFFIX,chenzhenyuan.com,DIRECT
  - DOMAIN-SUFFIX,mac-torrent-download.net,é»˜è®¤çº¿è·¯
  - DOMAIN,raw.gitmirror.com,DIRECT,no-resolve
  - DOMAIN,raw.iqiq.io,DIRECT,no-resolve
  - DOMAIN-SUFFIX,sketch.cloud,DIRECT

  # ============================================================================
  # IPæµ‹è¯• ç›¸å…³çš„è§„åˆ™
  # ----------------------------------------------------------------------------
  - DOMAIN,ip.900cha.com,DIRECT,no-resolve
  - DOMAIN-SUFFIX,ip.sb,DIRECT,no-resolve
  - DOMAIN-SUFFIX,local,DIRECT,no-resolve
  - DOMAIN,jayne-mini.local,DIRECT,no-resolve

  # ============================================================================
  # å¸¸è§å¹¿å‘ŠåŸŸåå±è”½
  # ----------------------------------------------------------------------------
  - DOMAIN,injections.adguard.org,REJECT
  - DOMAIN,local.adguard.org,REJECT
  - DOMAIN-SUFFIX,appsflyer.com,REJECT
  - DOMAIN-SUFFIX,doubleclick.net,REJECT
  - DOMAIN-SUFFIX,mmstat.com,REJECT
  - DOMAIN-SUFFIX,vungle.com,REJECT
  - DOMAIN-KEYWORD,admarvel,REJECT
  - DOMAIN-KEYWORD,admaster,REJECT
  - DOMAIN-KEYWORD,adsage,REJECT
  - DOMAIN-KEYWORD,adsmogo,REJECT
  - DOMAIN-KEYWORD,adsrvmedia,REJECT
  - DOMAIN-KEYWORD,adwords,REJECT
  - DOMAIN-KEYWORD,adservice,REJECT
  - DOMAIN-KEYWORD,domob,REJECT
  - DOMAIN-KEYWORD,duomeng,REJECT
  - DOMAIN-KEYWORD,dwtrack,REJECT
  - DOMAIN-KEYWORD,guanggao,REJECT
  - DOMAIN-KEYWORD,lianmeng,REJECT
  - DOMAIN-KEYWORD,mopub,REJECT
  - DOMAIN-KEYWORD,omgmta,REJECT
  - DOMAIN-KEYWORD,openx,REJECT
  - DOMAIN-KEYWORD,partnerad,REJECT
  - DOMAIN-KEYWORD,pingfore,REJECT
  - DOMAIN-KEYWORD,supersonicads,REJECT
  - DOMAIN-KEYWORD,uedas,REJECT
  - DOMAIN-KEYWORD,umeng,REJECT
  - DOMAIN-KEYWORD,usage,REJECT
  - DOMAIN-KEYWORD,wlmonitor,REJECT
  - DOMAIN-KEYWORD,zjtoolbar,REJECT
  - RULE-SET,BanAD,REJECT
  - RULE-SET,BanEasyList,REJECT

  # ============================================================================
  # è§„åˆ™é›†
  # ----------------------------------------------------------------------------
  - RULE-SET,LocalAreaNetwork,DIRECT
  - RULE-SET,Apple,DIRECT
  - RULE-SET,ChinaDomain,DIRECT
  - RULE-SET,GitHub,é¦™æ¸¯é›†ç¾¤
  - RULE-SET,Telegram,å°æ¹¾è´Ÿè½½
  - RULE-SET,Twitter,å°æ¹¾è´Ÿè½½
  # - RULE-SET,ProxyGFWlist,é»˜è®¤çº¿è·¯

  # è¿›ç¨‹å
  - PROCESS-NAME,BitTorrent Web,DIRECT
  - PROCESS-NAME,qbittorrent,DIRECT
  - PROCESS-NAME,aCity,é»˜è®¤çº¿è·¯
  - PROCESS-NAME,Twitter,å°æ¹¾è´Ÿè½½

  # ============================================================================
  # IP è§„åˆ™
  # ----------------------------------------------------------------------------
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN-KEYWORD,-cn,DIRECT
  - IP-CIDR6,2001:67c:4e8::/48,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR6,2001:b28:f23d::/48,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR6,2001:b28:f23f::/48,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,91.108.4.0/22,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,91.108.8.0/21,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,91.108.16.0/22,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,91.108.56.0/22,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,149.154.160.0/20,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,120.232.181.162/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,120.241.147.226/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,120.253.253.226/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,120.253.255.162/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,120.253.255.34/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,120.253.255.98/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,180.163.150.162/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,180.163.150.34/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,180.163.151.162/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,180.163.151.34/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,203.208.39.0/24,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,203.208.40.0/24,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,203.208.41.0/24,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,203.208.43.0/24,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,203.208.50.0/24,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,220.181.174.162/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,220.181.174.226/32,é»˜è®¤çº¿è·¯,no-resolve
  - IP-CIDR,220.181.174.34/32,é»˜è®¤çº¿è·¯,no-resolve

  # ============================================================================
  # ç™½åå•æ¨¡å¼
  # ----------------------------------------------------------------------------
  - GEOIP,CN,DIRECT
  - MATCH,é»˜è®¤çº¿è·¯
